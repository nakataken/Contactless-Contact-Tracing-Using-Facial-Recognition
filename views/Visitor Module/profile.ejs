<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" >
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <% if(typeof(visitor) != "undefined") { %>
    <div class="home_est container-fluid p-0">   
        <nav  class="navbar navbar-expand-md navbar-light px-5 ">
            <div  class="container-fluid px-md-5 mt-4">
                <a class="navbar-brand" href="#"><div class="navbar-logo" ></div></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <ul class="navbar-nav ms-auto my-auto d-flex flex-md-row flex-column align-items-center ">
                        <li class="nav-item mx-3" ><a class="nav-link" href="/visitor/logout">Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    
        <div class="head container-fluid d-flex align-items-center p-0">
            <div class="l-div col-lg-6 col-md-8 col-10 p-md-5 ms-lg-5 text-lg-start text-center mx-auto">
                <h1>Welcome, <%= visitor.name.fname %> <%= visitor.name.lname %></h1>
                <h5 class="col-lg-10 col-12 ">
                    Lorem ipsum dolor sit amet consectetud, eum consequatur explicabo quibusdam tenetur. Totam excepturi magni quia, consectetur odio quis ex!
                </h5>
                <div class="mt-3"><img src=<%=src%> alt="QR Code Image"></div>
                <button class="btn mt-3" onclick="downloadQR()">Download</button>
            </div>
        </div>
    </div>

    <% } %>

    <script>
        let img = document.querySelector("img").src;
        const downloadQR = () => {
            var a = document.createElement('a');
            a.href = img;
            a.download = `QR${(new Date().toJSON().slice(0,10))}.png`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>
</html>