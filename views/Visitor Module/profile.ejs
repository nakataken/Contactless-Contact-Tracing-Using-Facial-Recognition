<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
</head>
<body>
    <% if(typeof(visitor) != "undefined") { %>
    <ul>
        <li>Welcome, <%= visitor.name.fname %> <%= visitor.name.lname %></li>
        <li><a href="/visitor/details">Details</a></li>
        <li><a href="/visitor/logout">Logout</a></li>
    </ul>
    <img src=<%=src%> alt="QR Code Image">
    <button onclick="downloadQR()">Download</button>

    <% } %>
    <script>
        let img = document.querySelector("img").src;
        const downloadQR = () => {
            var a = document.createElement('a');
            a.href = img;
            a.download = `QR${(new Date().toJSON().slice(0,10))}.png`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>
</html>